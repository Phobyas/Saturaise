<div class="CollectionInformation__Description container mx-auto w-full px-3 lg:px-0">
  {%- if collection.metafields.custom.collection_quick_desc != blank -%}
    <div class="description-container collapsed">
      <div class="description-content">
        {{ collection.metafields.custom.collection_quick_desc | metafield_tag }}
      </div>
      
      <div class="fade-overlay"></div>
    </div>
    
    <div class="text-left mt-4">
      <button class="toggle-description collection-description-button">ROZWIŃ</button>
    </div>
  {%- endif -%}
</div>

<style>
  .CollectionInformation__Description {
    margin-top: 2em;
    margin-bottom: 2em;
    max-width: 1280px;
  }

  @media (min-width: 1920px) {
    .CollectionInformation__Description {
      max-width: 1600px;
    }
  }

  .description-container {
    position: relative;
    overflow: hidden;
    transition: max-height 0.5s ease;
  }

  .metafield-rich_text_field h1 {
    font-size: 30px !important;
    font-weight: 700 !important;
  }
   
  .description-container.collapsed {
    max-height: 200px; /* Adjust height as needed */
  }
  
  .description-container.expanded {
    max-height: 10000px; /* Large value to accommodate any length */
  }
  
  .fade-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 80px;
    background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,1));
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  
  .description-container.expanded .fade-overlay {
    opacity: 0;
  }

  .CollectionInformation__Description h2 {
    font-size: 1.5rem !important;
    font-weight: bold !important;
    margin-top: 1.5em !important;
    margin-bottom: 0.75em !important;
    color: #000 !important;
  }

  .CollectionInformation__Description p {
    margin-bottom: 1em !important;
    font-size: 1rem !important;
    line-height: 1.6 !important;
    color: #333 !important;
  }

  .CollectionInformation__Description ul {
    list-style-type: disc !important;
    margin-left: 1.5em !important;
    margin-bottom: 1em !important;
  }

  .CollectionInformation__Description li {
    margin-bottom: 0.5em !important;
    line-height: 1.6 !important;
  }

  .collection-description-button {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-height: 40px !important;
  padding: 8px 16px !important;
  border: 1px solid var(--dotted-color) !important;
  border-radius: 8px !important;
  background: var(--background, #fff) !important;
  color: var(--text-color, #333) !important;
  transition: all 0.3s ease !important;
  font-size: 14px !important;
  font-weight: 600 !important;
  letter-spacing: 0.5px !important;
  text-transform: uppercase !important;
  cursor: pointer !important;
}

.collection-description-button:hover {
  background: #f5f5f5 !important;
}
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const toggleButton = document.querySelector('.toggle-description');
    const descriptionContainer = document.querySelector('.description-container');
    
    if (toggleButton && descriptionContainer) {
      toggleButton.addEventListener('click', function() {
        const isExpanded = descriptionContainer.classList.contains('expanded');
        
        if (!isExpanded) {
          descriptionContainer.classList.remove('collapsed');
          descriptionContainer.classList.add('expanded');
          toggleButton.textContent = 'ZWIŃ';
        } else {
          descriptionContainer.classList.remove('expanded');
          descriptionContainer.classList.add('collapsed');
          toggleButton.textContent = 'ROZWIŃ';
        }
      });
    }
  });
</script>

{% schema %}
{
  "name": "Extended Description",
  "settings": [
    {
      "type": "paragraph",
      "content": "This section displays the extended collection description from collection.metafields.custom.collection_quick_desc."
    }
  ],
  "presets": [
    {
      "name": "Extended Description",
      "category": "Collection"
    }
  ]
}
{% endschema %}